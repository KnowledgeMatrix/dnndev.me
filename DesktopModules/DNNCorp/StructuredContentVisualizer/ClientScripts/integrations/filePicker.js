
define(['jquery','./UploadManagerComponent'],function($,uploadManagerComponent){var PARENT_SELECTOR="#content-filePickerEvoqParentId";function getFileTypeOptions(fileType,cf){var options={method:"",extensions:"",documentsLiterals:false}
if(fileType==="document"){options.method="UploadDocument";options.extensions=cf.filePickerDocumentsExtensions;options.getFilesMethod="GetDocuments";options.documentsLiterals=true;}else if(fileType==="image"){options.method="UploadImage";options.extensions=cf.filePickerImagesExtensions;options.getFilesMethod="GetImages";}
return options;};function initUploadManager(wrapper,cf,options){uploadManagerComponent.create(PARENT_SELECTOR,function(uploadManager){var fileTypeOptions=getFileTypeOptions(options.fileType,cf);uploadManager.setOnImageUploaded(options.onFilesUpload);uploadManager.setOnError(options.onError);uploadManager.setMultipleFiles(options.multipleFiles);uploadManager.setUploadFileMethodName(fileTypeOptions.method);uploadManager.setAcceptedFilesAttribute(fileTypeOptions.extensions);uploadManager.setGetFilesMethodName(fileTypeOptions.getFilesMethod);uploadManager.showDocumentsLiterals(fileTypeOptions.documentsLiterals);uploadManager.clearSelectedFiles();uploadManager.setUploadFileTabVisible(true);moveFilePicker($(PARENT_SELECTOR).children("div").eq(0),$("#"+wrapper));});};function moveFilePicker(filePicker,destWrapper){filePicker.appendTo(destWrapper);}
var renderFilePicker=function(wrapper,options){var cf=window.parent['personaBarSettings'];initUploadManager(wrapper,cf,options);};var removeFilePicker=function(wrapper){moveFilePicker($("#"+wrapper).children("div").eq(0),$(PARENT_SELECTOR));}
uploadManagerComponent.init();return{init:function init(wrapper,options){renderFilePicker(wrapper,options);},close:function close(wrapper){removeFilePicker(wrapper);}}});